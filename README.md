
# java.util.concurrent

### ‚ú®–ù–µ–º–Ω–æ–≥–æ —Ç–µ–æ—Ä–∏–∏

üõ†Ô∏è **java.util.concurrent** - —ç—Ç–æ –ø–∞–∫–µ—Ç –≤ —è–∑—ã–∫–µ **`Java`**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —à–∏—Ä–æ–∫–∏–π –Ω–∞–±–æ—Ä —É–¥–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é. –û–Ω –≤–≤–µ–¥–µ–Ω –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ **`Java 5`** –∏ –±—ã–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö.

üîß –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏–∑ **java.util.concurrent**:
1. ***`Executor –∏ ExecutorService`***. –≠—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ. **Executor** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ `execute()`, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π **Runnable**, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ **ExecutorService** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

2. ***`ThreadPoolExecutor`***. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ **ExecutorService**, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≥–∏–±–∫–∏–π –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞, –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ —Ç.–¥.

***`Future –∏ FutureTask`***. **Future** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º. **FutureTask** - —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **Future**, –∫–æ—Ç–æ—Ä–∞—è —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ **Runnable**, –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –≤ –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤.

***`CompletionService`***. –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–¥–∞—á–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –º–µ—Ä–µ –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –≠—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –ø–æ –º–µ—Ä–µ –∏—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

***`Lock –∏ ReentrantLock`***. –≠—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –≤–∑–∞–∏–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π.

***`ConcurrentHashMap`***. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ **Map**, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ.

***`ConcurrentLinkedQueue`***. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ **Queue**, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –≤—Å—Ç–∞–≤–∫—É –∏ —É–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ.

–ü–∞–∫–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—à–∏—Ä–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

### üöÄ–ü—Ä–∞–∫—Ç–∏–∫–∞

–í –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞–Ω–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω–æ–π —Ç–µ–º–æ–π:
1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ `Task`, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—â–µ–≥–æ —Å `Callable`
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `ExecutionManager`

## –ó–∞–¥–∞–Ω–∏–µ 1

–í–∞—à–∞ –∑–∞–¥–∞—á–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å **`Task`** –∏–º–µ—é—â–∏–π –æ–¥–∏–Ω –º–µ—Ç–æ–¥ `get()`:

```java
public class Task<T> {
    ‚Ä¶
 
    public Task(Callable<? extends T> callable) {
        //...
     }
 
    public T get() {
         ‚Ä¶ // todo implement me
    }
}
```
 
–î–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä `java.util.concurrent.Callable`. **`Callable`** –ø–æ—Ö–æ–∂ –Ω–∞ **`Runnable`**, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –µ–≥–æ —Ä–∞–±–æ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç (–∞ –Ω–µ void).
 
–í–∞—à–∞ –∑–∞–¥–∞—á–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `get()` –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã **`Callable`**. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ **callable** –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å —Ç–æ—Ç –ø–æ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–≤—ã–π –≤—ã–∑–≤–∞–ª –º–µ—Ç–æ–¥ `get()`. –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ _–æ–¥–Ω–æ–º_ –ø–æ—Ç–æ–∫–µ, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ–∂–∏–¥–∞—Ç—å –∫–æ–Ω—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–µ –Ω–∞–≥—Ä—É–∂–∞—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä).

–ï—Å–ª–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `get()` —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –ø—Ä–æ—Å—á–∏—Ç–∞–Ω, —Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å—Ä–∞–∑—É, (–¥–∞–∂–µ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ –Ω–∞ –≤—Ö–æ–¥ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å). 

–ï—Å–ª–∏ –ø—Ä–∏ –ø—Ä–æ—Å—á—ë—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–∏–∑–æ—à–µ–ª **Exception**, —Ç–æ –≤—Å–µ–º –ø–æ—Ç–æ–∫–∞–º –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `get()`, –Ω–∞–¥–æ –∫–∏–¥–∞—Ç—å —ç—Ç–æ—Ç **Exception**, –æ–±–µ—Ä–Ω—É—Ç—ã–π –≤ –≤–∞—à `RuntimeException` (–ø–æ–¥—Ö–æ–¥—è—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–≤–æ–µ–º—É –µ–∫—Å–µ–ø—à–µ–Ω—É –ø—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–∞–º–∏).

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

ü§î –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –±—ã–ª —Å–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å [**`Task`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/Task/Task.java), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ –æ–±—ä–µ–∫—Ç–æ–º —Ç–∏–ø–∞ **`Callable`**. –û–Ω –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω **`Runnable`**, –Ω–æ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. 

–ï—Å–ª–∏ –ø—Ä–∏ –ø—Ä–æ—Å—á—ë—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –æ—à–∏–±–∫–∞, —Ç–æ –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –±—É–¥—É—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å [**`CustomTaskException`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/Task/CustomTaskException.java). 

üöÄ –î–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞–Ω–∏—è –±—ã–ª —Å–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å [**`TaskApp`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/Task/TaskApp.java). 

–í –¥–∞–Ω–Ω–æ–º –∫–ª–∞—Å—Å–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ [**`Task`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/Task/Task.java), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É –≤ –º–µ—Ç–æ–∂–µ `get()`: –∏–º–∏—Ç–∞—Ü–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã `TimeUnit.SECONDS.sleep(5)` –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è _5_.

–î–∞–ª–µ–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è `ExecutorService` —Å –ø—É–ª–æ–º –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ 5 —à—Ç—É–∫. –¢—Ä–∏–∂–¥—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `submit()` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ [**`Task`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/Task/Task.java). –ö–∞–∂–¥—ã–π –ø–æ–¥–æ–±–Ω—ã–π –≤—ã–∑–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `Future`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ –º–µ—Ç–æ–¥–æ–º `shutdown()`. –î–∞–ª–µ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ —Å –ø–æ–º–æ—â—å—é –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ `get()` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ **Future**. –ï—Å–ª–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `get()` –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `InterruptedException` –∏–ª–∏ `ExecutionException`, –æ–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ –∏ –≤—ã–≤–µ–¥–µ–Ω–æ –Ω–∞ –∫–æ–Ω—Å–æ–ª—å. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –æ–¥–∏–Ω–∞–∫–æ–≤—ã –ª–∏ –æ–Ω–∏. 

–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞–Ω–∏—è:

![task1](https://github.com/MironovNikita/sber-homework14/blob/main/res/task1.png)

## –ó–∞–¥–∞–Ω–∏–µ 2

–í–∞—à–∞ –∑–∞–¥–∞—á–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **`ExecutionManager`**
```java
public interface ExecutionManager {
    Context execute(Runnable callback, Runnable... tasks);
}
```
 
–ú–µ—Ç–æ–¥ `execute` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Ç–∞—Å–∫–æ–≤ - —ç—Ç–æ –∑–∞–¥–∞–Ω–∏—è –∫–æ—Ç–æ—Ä—ã–µ **`ExecutionManager`** –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–≤ –≤–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—É—Å—Ç—å –±—É–¥–µ—Ç –≤ —Å–≤–æ–µ–º –ø—É–ª–µ –ø–æ—Ç–æ–∫–æ–≤). –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–∞—Å–∫–æ–≤ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è `callback` (—Ä–æ–≤–Ω–æ 1 —Ä–∞–∑). 
 
–ú–µ—Ç–æ–¥ `execute` ‚Äì —ç—Ç–æ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç **`Context`**. **`Context`** —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:
```java
public interface Context {
    int getCompletedTaskCount();
 
    int getFailedTaskCount();
 
    int getInterruptedTaskCount();
 
    void interrupt();
 
    boolean isFinished();
}
```
–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
- –º–µ—Ç–æ–¥ `getCompletedTaskCount()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞—Å–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å.
- –º–µ—Ç–æ–¥ `getFailedTaskCount()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞—Å–∫–æ–≤, –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏–∑–æ—à–µ–ª `Exception`.
- –º–µ—Ç–æ–¥ `interrupt()` –æ—Ç–º–µ–Ω—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞—Å–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è.
- –º–µ—Ç–æ–¥ `getInterruptedTaskCount()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞—Å–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –≤—ã–ø–æ–ª–µ–Ω—ã –∏–∑-–∑–∞ –æ—Ç–º–µ–Ω—ã (–≤—ã–∑–æ–≤–æ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–µ—Ç–æ–¥–∞).
- –º–µ—Ç–æ–¥ `isFinished()` –≤–µ—Ä–Ω–µ—Ç true, –µ—Å–ª–∏ –≤—Å–µ —Ç–∞—Å–∫–∏ –±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω—ã, false –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ.  

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

ü§® –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã 

[**`ExecutionManager`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/ExecutionManager/ExecutionManager.java):

```java
public interface ExecutionManager {
    Context execute(Runnable callback, Runnable... tasks);
}
```
–∏ [**`Context`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/ExecutionManager/Context.java):
```java
public interface Context {
    int getCompletedTaskCount();

    int getFailedTaskCount();

    int getInterruptedTaskCount();

    void interrupt();

    boolean isFinished();
}
```

–ó–∞—Ç–µ–º –±—ã–ª —Å–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å [**`ExecutionManagerImpl`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/ExecutionManager/ExecutionManagerImpl.java). –î–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å [**`ExecutionManager`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/ExecutionManager/ExecutionManager.java) –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–µ—Ç–æ–¥–∞ `execute()`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –ø–æ—Ç–æ–∫–∞—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–ª–∞—Å—Å–∞ –º—ã —Å–æ–∑–¥–∞—ë–º –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ **`ExecutorService`**. –í –º–µ—Ç–æ–¥–µ `execute(Runnable callback, Runnable... tasks)` —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–±—ä–µ–∫—Ç **`ExecutionContext`**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á. –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `submit()`, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **`ExecutionContext`** –æ–± —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. –í —Å–ª—É—á–∞–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `onTaskCompleted()`, –≤ —Å–ª—É—á–∞–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ - `onTaskFailed()`.

–°–∞–º **`ExecutionContext`** —è–≤–ª—è–µ—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–º –∫–ª–∞—Å—Å–æ–º, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å [**`Context`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/ExecutionManager/Context.java). –í –¥–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö—Å—è —Å –æ—à–∏–±–∫–æ–π –∏ –ø—Ä–µ—Ä–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –∞ —Ç–∞–∫–∂–µ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –∑–∞–¥–∞—á. 

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã 2–≥–æ –∑–∞–¥–∞–Ω–∏—è –±—ã–ª —Å–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å [**`ExecutionApp`**](https://github.com/MironovNikita/sber-homework14/blob/main/src/main/java/org/application/ExecutionManager/ExecutionApp.java). –í –¥–∞–Ω–Ω–æ–º –∫–ª–∞—Å—Å–µ –º—ã —Å–æ–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ **`ExecutionManagerImpl`**, `callback`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ, –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á, –∞ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –º–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á `tasks`, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∏–º–∏—Ç–∏—Ä—É—é—â–µ–µ –Ω–µ–∫–æ—Ç–æ—Ä—É—é —Ä–∞–±–æ—Ç—É. –î–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–∞—è —á—ë—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –≤—ã–≤–æ–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –≤ –∫–æ–Ω—Å–æ–ª—å.

–ó–∞—Ç–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `execute(callback, tasks)`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç –∑–∞–¥–∞—á–∏ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ó–∞—Ç–µ–º –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–∂–∏–¥–∞–µ—Ç —Ç—Ä–∏ —Å–µ–∫—É–Ω–¥—ã, –∞ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `interrupt()` –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∑–∞–¥–∞—á.

–ü–æ—Å–ª–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å–µ –∑–∞–¥–∞—á–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –≤—ã–≤–æ–¥–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–± —É—Å–ø–µ—à–Ω—ã—Ö, –∑–∞–¥–∞—á–∞—Ö, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö—Å—è —Å –æ—à–∏–±–∫–æ–π, –∏ –ø—Ä–µ—Ä–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö.

–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞–Ω–∏—è:

![task2](https://github.com/MironovNikita/sber-homework14/blob/main/res/task2.png)

### üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–í [**`pom.xml`**](https://github.com/MironovNikita/sber-homework14/blob/main/pom.xml) –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –Ω–µ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –±–ª–æ–∫–µ *properties /properties*:

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```java
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  1.558 s
[INFO] Finished at: 2024-02-19T19:53:18+03:00
[INFO] ------------------------------------------------------------------------
```